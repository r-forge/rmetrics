<html><head><title>Utilities and Benchmark Analysis</title>
<meta http-equiv="Content-Type" content="text/html; charset=">
<link rel="stylesheet" type="text/css" href="Rchm.css">
</head>
<body>

<table width="100%"><tr><td>BenchmarkAnalysis(fTrading)</td><td align="right">R Documentation</td></tr></table><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
<param name="keyword" value="R:   BenchmarkAnalysis">
<param name="keyword" value="R:   ohlcPlot">
<param name="keyword" value="R:   sharpeRatio">
<param name="keyword" value="R:   sterlingRatio">
<param name="keyword" value="R:   maxDrawDown">
<param name="keyword" value="R:   getReturns">
<param name="keyword" value=" Utilities and Benchmark Analysis">
</object>


<h2>Utilities and Benchmark Analysis</h2>


<h3>Description</h3>

<p>
A collection and description of utility 
and benchmark functions for the analysis 
of financial markets. The collection 
provides a set of functions for the 
computation of returns, for the display 
of price charts, and for benchmark 
measurements.
<br>
</p>
<p>
The functions are:
</p>

<table summary="Rd table">
<tr>
  <td align="left"><code>getReturns</code> </td>  <td align="left"> Computes returns given a price series, </td>
</tr>
<tr>
  <td align="left"> <code>ohlcPlot</code> </td>  <td align="left"> Plots open&ndash;high&ndash;low&ndash;close bar charts, </td>
</tr>
<tr>
  <td align="left"> <code>sharpeRatio</code> </td>  <td align="left"> Computes Sharpe Ratio, </td>
</tr>
<tr>
  <td align="left"> <code>sterlingRatio</code> </td>  <td align="left"> Computes Sterling Ratio, </td>
</tr>
<tr>
  <td align="left"> <code>maxDrawDown</code> </td>  <td align="left"> Computes maximum drawdown.</td>
</tr>
</table>


<h3>Usage</h3>

<pre>
getReturns(x, type = c("continuous", "discrete"), percentage = FALSE, 
    trim = TRUE)
    
ohlcPlot(x, xlim = NULL, ylim = NULL, xlab = "Time", ylab, col = par("col"),
    bg = par("bg"), axes = TRUE, frame.plot = axes, ann = par("ann"),
    main = NULL, date = c("calendar", "julian"), format = "%Y-%m-%d",
    origin = "1899-12-30", ...)
    
sharpeRatio(x, r = 0, scale = sqrt(250))
sterlingRatio(x)

maxDrawDown(x)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>date, format, origin</code></td>
<td>
[ohlcPlot] - <br>
date elements,<br>
<code>date</code>, a string indicating the type of x axis annotation. 
Default is calendar dates. <br>
<code>format</code>, a string indicating the format of the x axis 
annotation if <code>date == "calendar"</code>. For details see
<code><a onclick="findlink('base', 'strptime.html')" style="text-decoration: underline; color: blue; cursor: hand">format.POSIXct</a></code>. <br>
<code>origin</code> an R object specifying the origin of the Julian 
dates if <code>date == "calendar"</code>. Defaults to 1899-12-30 
(Popular spreadsheet programs internally also use Julian dates 
with this origin).
</td></tr>
<tr valign="top"><td><code>percentage</code></td>
<td>
[getReturns] - <br>
a logical flag. If set to <code>TRUE</code>, the return series will 
be expressed in percentage points otherwise not. The default 
is <code>FALSE</code>. 
</td></tr>
<tr valign="top"><td><code>r</code></td>
<td>
[sharpeRatio] - <br>
the risk free rate. Default corresponds to using portfolio
returns not in excess of the riskless return.
</td></tr>
<tr valign="top"><td><code>scale</code></td>
<td>
[sharpeRatio] - <br>
a scale factor. Default corresponds to an annualization
when working with daily financial time series data.
</td></tr>
<tr valign="top"><td><code>trim</code></td>
<td>
[getReturns] - <br>
a logical flag. If set to <code>TRUE</code>, the first missing 
observation in the return series will be removed. The 
default is <code>TRUE</code>.
</td></tr>
<tr valign="top"><td><code>type</code></td>
<td>
[getReturns] - <br>
a character string specifying the type of returns to be 
computed. If <code>type="continuous"</code>, the returns are calculated 
as the logarithm differences; if <code>type="discrete"</code>, the 
returns are calculated as percentage changes.
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
a numeric vector of prices.
For <code>ohlcPlot</code> a multivariate time series object of 
class <code>mts</code> is required.
</td></tr>
<tr valign="top"><td><code>xlim, ylim, xlab, ylab, col, bg, axes, frame.plot, ann, main</code></td>
<td>
[ohlcPlot] - <br>
graphical arguments, see <code><a onclick="findlink('graphics', 'plot.html')" style="text-decoration: underline; color: blue; cursor: hand">plot</a></code>,
<code><a onclick="findlink('graphics', 'plotdefault.html')" style="text-decoration: underline; color: blue; cursor: hand">plot.default</a></code> and <code><a onclick="findlink('graphics', 'par.html')" style="text-decoration: underline; color: blue; cursor: hand">par</a></code>.
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
[ohlcPlot] - <br>
further graphical arguments passed to <code><a onclick="findlink('graphics', 'plot.window.html')" style="text-decoration: underline; color: blue; cursor: hand">plot.window</a></code>, 
<code><a onclick="findlink('graphics', 'title.html')" style="text-decoration: underline; color: blue; cursor: hand">title</a></code>, <code><a onclick="findlink('graphics', 'axis.html')" style="text-decoration: underline; color: blue; cursor: hand">axis</a></code>, and <code><a onclick="findlink('graphics', 'box.html')" style="text-decoration: underline; color: blue; cursor: hand">box</a></code>.
</td></tr>
</table>

<h3>Details</h3>

<p>
<B>Open&ndash;High&ndash;Low&ndash;Close Chart:</B>
<br><br>
Within an open&ndash;high&ndash;low&ndash;close bar chart, each bar represents
price information for the time interval between the open and the close
price. The left tick for each bar indicates the open price for the
time interval. The right tick indicates the closing price for the time
interval. The vertical length of the bar represents the price range
for the time interval.
The time scale of <code>x</code> must be in Julian dates (days since the
<code>origin</code>).
<br>
<code>[tseries:plotOHLC]</code>
<br>
</p>
<p>
<B>Sharpe and Sterling Ratios:</B>
<br><br>  
The Sharpe ratio is defined as a portfolio's mean return in excess of
the riskless return divided by the portfolio's standard deviation. In
finance the Sharpe Ratio represents a measure of the portfolio's
risk-adjusted (excess) return. 
The Sterling ratio is defined as a portfolio's overall return divided
by the portfolio's maximum drawdown statistic. In finance the
Sterling Ratio represents a measure of the portfolio's risk-adjusted
return.
<br>
<code>[tseries:sharpe]</code>
<br>  
</p>
<p>
<B>Maximum Drawdown:</B>
<br><br>
The maximum drawdown or maximum loss statistic is defined as the 
maximum value drop after one of the peaks of <code>x</code>. For financial
instruments the maximum drawdown represents the worst investment 
loss for a buy&ndash;and&ndash;hold strategy invested in <code>x</code>.
<br>
<code>[tseries:maxdrawdown]</code>
<br>
</p>
<p>
<B>Get Returns:</B>
<br><br>
The function computes the return series given a financial security 
price series. The price series may be an object of class <code>numeric</code>
or a time series object. This includes objects of classes <code>"ts"</code>,
<code>"its"</code> and/or <code>"timeSeries"</code>.
</p>


<h3>Value</h3>

<p>
<code>ohlcPlot</code> 
<br>
creates an Open&ndash;High&ndash;Low&ndash;Close chart.
<br>
<code>sharpeRatio</code><br>
<code>sterlingRatio</code> 
<br>
return the Sharpe or Sterling ratio, a numeric value.
<br>
<code>maxDrawDown</code>
<br>
returns a list containing the following three components: 
<code>maxDrawDown</code>, double representing the max drawdown or max loss 
statistic; <code>from</code>, the index (or vector of indices) where the 
maximum drawdown period starts; <code>to</code>, the index (or vector of 
indices) where the max drawdown period ends.
<br>
<code>getReturns</code>
<br>
returns an object of the same class as the input object <code>x</code>.</p>

<h3>Author(s)</h3>

<p>
Adrian Trapletti for the ohlcPlot,*Ratio and maxDrawDown functions, <br>
Diethelm Wuertz for the Rmetrics <font face="Courier New,Courier" color="#666666"><b>R</b></font>-port.
</p>


<h3>Examples</h3>

<pre>
## ohlcPlot -
   # Plot OHLC for SP500
   # ohlcPlot(x, ylab = "price", main = instrument)
   
## sharpeRatio -
   # Sharpe Ratio for DAX and FTSE:
   data(EuStockMarkets)
   dax = log(EuStockMarkets[, "DAX"])
   ftse = log(EuStockMarkets[, "FTSE"])
   # Ratios:
   sharpeRatio(dax)
   sharpeRatio(ftse)
   
## maxDrawDown -
   data(EuStockMarkets)
   dax = log(EuStockMarkets[, "DAX"])
   mdd = maxDrawDown(dax)
   mdd
   # Plot DAX:
   plot(dax)
   grid()
   segments(time(dax)[mdd$from], dax[mdd$from],
     time(dax)[mdd$to], dax[mdd$from])
   segments(time(dax)[mdd$from], dax[mdd$to],
     time(dax)[mdd$to], dax[mdd$to])
   mid = time(dax)[(mdd$from + mdd$to)/2]
   arrows(mid, dax[mdd$from], mid, dax[mdd$to], col = 2)
   title(main = "DAX: Max Drawdown")
   
## getReturns -
   Close = as.timeSeries(data(msft.dat))[, "Close"]
   seriesPlot(getReturns(Close))
</pre>

<script Language="JScript">
function findlink(pkg, fn) {
var Y, link;
Y = location.href.lastIndexOf("\\") + 1;
link = location.href.substring(0, Y);
link = link + "../../" + pkg + "/chtml/" + pkg + ".chm::/" + fn;
location.href = link;
}
</script>


<hr><div align="center">[Package <em>fTrading</em> version 251.70 <a href="00Index.html">Index]</a></div>

</body></html>
