<html><head><title>Import Market Data from the Internet</title>
<link rel="stylesheet" type="text/css" href="Rchm.css">
</head>
<body>

<table width="100%"><tr><td>TimeSeriesImport(fCalendar)</td><td align="right">R Documentation</td></tr></table><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
<param name="keyword" value="R:   TimeSeriesImport">
<param name="keyword" value="R:   fWEBDATA">
<param name="keyword" value="R:   fWEBDATA-class">
<param name="keyword" value="R:   show.fWEBDATA">
<param name="keyword" value="R:   show,fWEBDATA-method">
<param name="keyword" value="R:   economagicImport">
<param name="keyword" value="R:   yahooImport">
<param name="keyword" value="R:   fredImport">
<param name="keyword" value="R:   forecastsImport">
<param name="keyword" value="R:   yahooSeries">
<param name="keyword" value="R:   keystatsImport">
<param name="keyword" value="R:   print.keystats">
<param name="keyword" value=" Import Market Data from the Internet">
</object>


<h2>Import Market Data from the Internet</h2>


<h3>Description</h3>

<p>
A collection and description of functions to import 
financial and economic market data from the Internet.
Download functions are available for economic and
financial market data from Economagic's, from 
Yahoo's, from the Federal Reserve's, and from the
the forecasts.org Internet sites.
<br>
</p>
<p>
The functions are:
</p>

<table summary="Rd table">
<tr>
  <td align="left"><code>economagicImport</code> </td>  <td align="left"> Economic series from Economagic's Web site, </td>
</tr>
<tr>
  <td align="left"> <code>yahooImport</code> </td>  <td align="left"> daily stock market data from Yahoo's Web site, </td>
</tr>
<tr>
  <td align="left"> <code>yahooSeries</code> </td>  <td align="left"> easy to use download from Yahoo, </td>
</tr>
<tr>
  <td align="left"> <code>keystatsImport</code> </td>  <td align="left"> key statistics from Yahoo's Web site, </td>
</tr>
<tr>
  <td align="left"> <code>fredImport</code> </td>  <td align="left"> time series from St. Louis FRED Web site, </td>
</tr>
<tr>
  <td align="left"> <code>forecastsImport</code> </td>  <td align="left"> monthly data from the Financial Forecast Center. </td>
</tr>
</table>


<h3>Usage</h3>

<pre>
economagicImport(query, file = "tempfile", 
    source = "http://www.economagic.com/em-cgi/data.exe/",  
    frequency = c("quarterly", "monthly", "daily"), save = FALSE, 
    colname = "VALUE", try = TRUE)  
yahooImport(query, file = "tempfile", 
    source = "http://chart.yahoo.com/table.csv?", save = FALSE,
    sep = ";", swap = 20, try = TRUE)
keystatsImport(query, file = "tempfile", 
    source = "http://finance.yahoo.com/q/ks?s=", save = FALSE, 
    try = TRUE) 
fredImport(query, file = "tempfile", 
    source = "http://research.stlouisfed.org/fred2/series/", 
    frequency = "daily", save = FALSE, sep = ";", try = TRUE) 
forecastsImport(query, file = "tempfile", 
    source = "http://www.forecasts.org/data/data/", save = FALSE, 
    try = TRUE) 
    
yahooSeries(symbols = c("^DJI", "IBM"), from = NULL, to = NULL, 
    nDaysBack = 365, quote = c("Open", "High", "Low", "Close", "Volume"), 
    aggregation = c("d", "w", "m"), returnClass = c("timeSeries", "ts", 
    "matrix", "data.frame"), getReturns = FALSE, ...)
        
show.fWEBDATA(object)
## S3 method for class 'keystats':
print(x, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>aggregation</code></td>
<td>
[yahooSeries] - <br>
a character string denoting the aggregation level of the 
downloaded data records, <code>d</code> for daily, <code>w</code> for
weekly and <code>m</code> for monthly data records.
</td></tr>
<tr valign="top"><td><code>colname</code></td>
<td>
[economagicImport] - <br>
a character string which defines the name of the value
column. By default "VALUE".
</td></tr>
<tr valign="top"><td><code>file</code></td>
<td>
a character string with filename, usually
having extension ".csv", where to save the downloaded data.
</td></tr>
<tr valign="top"><td><code>frequency</code></td>
<td>
a character string, one of "quarterly", "monthly", or "daily",
defining the frequency of the data records.
</td></tr>
<tr valign="top"><td><code>from, to</code></td>
<td>
[yahooSeries] - <br>
an ISO-8601 formatted character string of the starting (end) 
date, e.g. "2005-01-01".
</td></tr>
<tr valign="top"><td><code>getReturns</code></td>
<td>
[yahooSeries] - <br>
a logical flag. Should return values be computed using the 
function <code>returnSeries</code>?
</td></tr>
<tr valign="top"><td><code>nDaysBack</code></td>
<td>
[yahooSeries] - <br>
an integer giving the length of the download period in number 
of days starting n days back from today. Only in use if 
<code>from</code> and <code>to</code> are not specified.
</td></tr>
<tr valign="top"><td><code>object</code></td>
<td>
an S4 object of class <code>"fWEBDATA"</code>.
</td></tr>
<tr valign="top"><td><code>query</code></td>
<td>
a character string, denoting the location of the data at the 
web site.
</td></tr>
<tr valign="top"><td><code>save</code></td>
<td>
a logical value, if set to TRUE the downloaded data file will 
be stored under the path and file name specified by the
string <code>file</code>. By default FALSE.
</td></tr>
<tr valign="top"><td><code>quote</code></td>
<td>
[yahooSeries] - <br>
a character value or vector of strings giving the column name(s) 
of those instruments to be extracted from the download. 
</td></tr>
<tr valign="top"><td><code>returnClass</code></td>
<td>
[yahooSeries] - <br>
a character string naming the class of the object to be 
returned. By default the function <code>yahooSeries</code> returns 
a <code>"timeSeries"</code> object, alternatives are: <code>"ts"</code>, 
<code>"matrix"</code>, or <code>"data.frame"</code>.
</td></tr>
<tr valign="top"><td><code>sep</code></td>
<td>
a character value, defining the field separator for the 
destination file which saves the downloaded data records.
By default a semicolon.
</td></tr>
<tr valign="top"><td><code>source</code></td>
<td>
a character string with the download URL.
</td></tr>
<tr valign="top"><td><code>symbols</code></td>
<td>
[yahooSeries] - <br>
a character string value or vector, the Yahoo symbol name(s).
</td></tr>
<tr valign="top"><td><code>swap</code></td>
<td>
[yahooImport] - <br>
an integer value which determines when we swap from the
19th to 20th century, by default 20, i.e. we swap 1920.
This is necessary since Yahoo does not list the century in
its dates, e.g. "15-Aug-02".
</td></tr>
<tr valign="top"><td><code>try</code></td>
<td>
a logical value, if set to TRUE the Internet access will be
checked.
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
[print.keystats] - <br>
an object of class <code>keystats</code> as returned by the function
<code>keystatsImport</code>.
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
optional arguments to be passed.
</td></tr>
</table>

<h3>Details</h3>

<p>
<B>Import data from www.economagic.com</B>
<br><br>
Frequently requested data files from Economagic for the US economy include:
</p>

<table summary="Rd table">
<tr>
  <td align="left"><code>[query]</code>                    </td>  <td align="left"> Description: </td>
</tr>
<tr>
  <td align="left"> </td>  <td align="left"> </td>
</tr>
<tr>
  <td align="left"> <code>var/leading-ind-long</code>       </td>  <td align="left"> Index of Leading Economic Indicators  </td>
</tr>
<tr>
  <td align="left"> <code>beana/t102l01</code>              </td>  <td align="left"> Real Gross Domestic Product  </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/trsp500</code>             </td>  <td align="left"> SP 500 Total Return </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/gnp</code>                 </td>  <td align="left"> Gross National Product in Current Dollars </td>
</tr>
<tr>
  <td align="left"> <code>var/cpiu-long</code>              </td>  <td align="left"> Consumer Price Index - All Urban Consumers </td>
</tr>
<tr>
  <td align="left"> <code>feddal/ru</code>                  </td>  <td align="left"> Unemployment Rate </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/indpro</code>              </td>  <td align="left"> Total Industrial Production Index </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/exjpus+2</code>            </td>  <td align="left"> FX Rate: Japanese Yen to one US Dollar </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/fedfunds+2</code>          </td>  <td align="left"> Federal Funds Rate </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/mdiscrt+2</code>           </td>  <td align="left"> Discount Rate </td>
</tr>
<tr>
  <td align="left"> <code>fedbog/tcm30y+2</code>            </td>  <td align="left"> 30-Year Treasury Constant Maturity Rate </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/mprime+2</code>            </td>  <td align="left"> Bank Prime Loan Rate </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/tb3ms+2</code>             </td>  <td align="left"> 3-Month Treasury Bills - Secondary Market </td>
</tr>
<tr>
  <td align="left"> <code>fedstl/tb6ms+2</code>             </td>  <td align="left"> 6-Month Treasury Bills - Secondary Market </td>
</tr>
<tr>
  <td align="left"> <code>fedbog/cm+2</code>                </td>  <td align="left"> 30 Year Federal Home Loan Mortgages </td>
</tr>
<tr>
  <td align="left"> <code>var/west-texas-crude-long</code>  </td>  <td align="left"> Price of West Texas Intermediate Crude </td>
</tr>
</table>

<p>
<B>Import data from chart.yahoo.com:</B>
<br><br>
The query string is given as 
<br><br>
<code>s=SYMBOL&amp;a=DD&amp;b=MM&amp;c=CCYY&amp;g=d&amp;q=q&amp;z=SYMBOL&amp;x=.csv</code> 
<br><br>
where <code>SYMBOL</code> has to replaced by the symbol name of the 
instrument, and <code>DD</code>, <code>MM</code>, and <code>CCYY</code> by the 
day, month-1 and century/year when the time series should start.
</p>
<p>
Here are some examples of symbols:
</p>

<table summary="Rd table">
<tr>
  <td align="left"><code>[query]</code>  </td>  <td align="left"> Description: </td>
</tr>
<tr>
  <td align="left"> </td>  <td align="left"> </td>
</tr>
<tr>
  <td align="left"> <code>^DJI</code>     </td>  <td align="left"> Dow Jones 30 Industrial Averages </td>
</tr>
<tr>
  <td align="left"> <code>^NYA</code>     </td>  <td align="left"> New York Stock Exchange Composite </td>
</tr>
<tr>
  <td align="left"> <code>^NDX</code>     </td>  <td align="left"> Nasdaq 100 Index </td>
</tr>
<tr>
  <td align="left"> <code>^IXIC</code>    </td>  <td align="left"> Nasdaq Composite Index </td>
</tr>
<tr>
  <td align="left"> <code>^TYX</code>     </td>  <td align="left"> US 30Y Treasury Bond Index </td>
</tr>
<tr>
  <td align="left"> <code>IBM</code>      </td>  <td align="left"> BM DJIA Stock </td>
</tr>
<tr>
  <td align="left"> <code>KO</code>       </td>  <td align="left"> Coca-Cola DJIA Stock </td>
</tr>
</table>

<p>
The meaning of the tokens in the query string are the following:
</p>

<table summary="Rd table">
<tr>
  <td align="left">Token           </td>  <td align="left"> Description  </td>
</tr>
<tr>
  <td align="left"> </td>  <td align="left"> </td>
</tr>
<tr>
  <td align="left"> <code>s</code>        </td>  <td align="left"> Selected Ticker-Symbol </td>
</tr>
<tr>
  <td align="left"> <code>a</code>        </td>  <td align="left"> First Quote starts with Month (mm) </td>
</tr>
<tr>
  <td align="left"> <code>b</code>        </td>  <td align="left"> First Quote starts with Day (dd) </td>
</tr>
<tr>
  <td align="left"> <code>c</code>        </td>  <td align="left"> First Quote starts with Year (ccyy) </td>
</tr>
<tr>
  <td align="left"> <code>d</code>        </td>  <td align="left"> Last Quote ends with Month (mm) </td>
</tr>
<tr>
  <td align="left"> <code>e</code>        </td>  <td align="left"> Last Quote ends with Day (dd) </td>
</tr>
<tr>
  <td align="left"> <code>f</code>        </td>  <td align="left"> Last Quote ends with Year (ccyy) </td>
</tr>
<tr>
  <td align="left"> <code>z</code>        </td>  <td align="left"> Selected Ticker-Symbol </td>
</tr>
</table>

<p>
Note, that month tokens range between 0 and 11 for January to 
December!
<br>
</p>


<h3>Value</h3>

<p>
The functions <code>economagicImport</code>, <code>fredImport</code>, and
<code>yahooImport</code> return an S4 object of class <code>fWEBDATA</code> 
with the following slots:
</p>
<table summary="R argblock">
<tr valign="top"><td><code>@call</code></td>
<td>
the function call.  
</td></tr>
<tr valign="top"><td><code>@data</code></td>
<td>
the data as downloaded formatted as a data.frame.
</td></tr>
<tr valign="top"><td><code>@param</code></td>
<td>
a character vector whose elements contain the values of selected 
parameters of the argument list.
</td></tr>
<tr valign="top"><td><code>@title</code></td>
<td>
a character string with the name of the download. This can be 
overwritten specifying a user defined input argument.
</td></tr>
<tr valign="top"><td><code>@description</code></td>
<td>
a character string with an optional user defined description. 
By default just the current date when the test was applied will
be returned.</td></tr>
</table>
<p>

<br>
The function <code>yahooSeries</code> returns by default an S4 object of 
class  <code>timeSeries</code> or alternatively an object specified by
the function argument <code>returnClass</code>.</p>

<h3>Note</h3>

<p>
<B>Internet Download:</B>
<br><br>
Note, that if the service provider changes the data file format 
it may become necessary to modify and update the functions. 
<br>
The R package <code>tseries</code> from Adrian Trapletti offers an 
alternative function to download stock market data and indexes 
from Yahoo's Internet site.
</p>
<p>
<B>Functions added to Splus Version:</B>
<br><br>
These functions are only used when running Rmetrics under SPlus. 
Note, that only part of the functionality is supported which is 
required running these R functions for Rmetrics under Splus.
</p>


<h3>Author(s)</h3>

<p>
Diethelm Wuertz for the Rmetrics <font face="Courier New,Courier" color="#666666"><b>R</b></font>-port.
</p>


<h3>Examples</h3>

<pre>
## Not run: 
## SOURCE("fcALENDAR.6A-TimeSeriesImport")

## economagicImport -
   USDEUR = economagicImport(query = "fedny/day-fxus2eu", 
     frequency = "daily", colname = "USDEUR")
   # Print Data Slot if Internet Download was Successful:
   if (!is.null(USDEUR)) print(USDEUR@data[1:20, ])

## economagicImport -
   USFEDFUNDS = economagicImport(query = "fedstl/fedfunds+2", 
     frequency = "monthly", colname = "USFEDFUNDS")
   if (!is.null(USFEDFUNDS)) print(USFEDFUNDS@data[1:20, ])
   
## economagicImport -
   USGNP = economagicImport(query = "fedstl/gnp", 
     frequency = "quarterly", colname = "USGNP")
   if(!is.null(USGNP)) print(USGNP@data[1:20, ])  
     
## yahooImport -
   # [test 19/20 century change 01-12-1999 -- 31-01-2000]
   query = "s=IBM&amp;a=11&amp;b=1&amp;c=1999&amp;d=0&amp;q=31&amp;f=2000&amp;z=IBM&amp;x=.csv"
   IBM = yahooImport(query)  
   if (!is.null(IBM)) print(IBM@data[1:20, ]) 
   
## fredImport -
   DPRIME = fredImport("DPRIME")
   if (!is.null(DPRIME)) print(DPRIME@data[1:20, ])       
## End(Not run)
</pre>



<hr><div align="center">[Package <em>fCalendar</em> version 231.10066 <a href="00Index.html">Index]</a></div>

</body></html>
